!function(){function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"===typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"===typeof t||"function"===typeof t}function c(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function i(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(){return f("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){(null!=e||t.value)&&(t.value=e)}let g;function y(t){g=t}function x(){if(!g)throw Error("Function called outside component initialization");return g}const v=[],b=[],k=[],E=[],w=Promise.resolve();let _=!1;function C(t){k.push(t)}let S=!1;const M=new Set;function j(){if(!S){S=!0;do{for(let t=0;t<v.length;t+=1){const e=v[t];y(e),A(e.$$)}for(v.length=0;b.length;)b.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];M.has(e)||(M.add(e),e())}k.length=0}while(v.length);for(;E.length;)E.pop()();_=!1,S=!1,M.clear()}}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const N=new Set;let L;function T(){L={r:0,c:[],p:L}}function z(){L.r||o(L.c),L=L.p}function O(t,e){t&&t.i&&(N.delete(t),t.i(e))}function q(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),L.c.push(()=>{N.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function B(t,e){q(t,1,1,()=>{e.delete(t.key)})}function F(t){t&&t.c()}function H(t,n,s){const{fragment:c,on_mount:i,on_destroy:u,after_update:l}=t.$$;c&&c.m(n,s),C(()=>{const n=i.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(C)}function I(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(e,r,s,c,i,u,a=[-1]){const f=g;y(e);const d=r.props||{},p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:a};let m=!1;if(p.ctx=s?s(e,d,(t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(p.bound[t]&&p.bound[t](r),m&&function(t,e){-1===t.$$.dirty[0]&&(v.push(t),_||(_=!0,w.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();r.intro&&O(e.$$.fragment),H(e,r.target,r.anchor),j()}y(f)}class U{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const Y="undefined"!==typeof Symbol?Symbol("storeon"):"@@storeon";function D(...t){let e=(n=Y,x().$$.context.get(n));var n;let o={};e.on("@changed",(e,n)=>{t.forEach(t=>{n[t]&&o[t]&&o[t](n[t])})});let r={};return t.forEach(t=>{r[t]=(t=>({subscribe(n){let r=e.get();return o[t]=n,n(r[t]),()=>{delete o[t]}}}))(t)}),r.dispatch=e.dispatch,r}function G(e){let n,r;return{c(){n=a("input"),$(n,"type","text"),$(n,"class","field svelte-ds0kos")},m(t,s,c){u(t,n,s),h(n,e[0]),c&&o(r),r=[m(n,"input",e[3]),m(n,"keypress",e[1])]},p(t,[e]){1&e&&n.value!==t[0]&&h(n,t[0])},i:t,o:t,d(t){t&&l(n),o(r)}}}function J(t,e,n){let o="";const{dispatch:r}=D();return[o,({keyCode:t})=>{13===t&&""!==o.trim()&&(r("items/add",o),n(0,o=""))},r,function(){o=this.value,n(0,o)}]}class K extends U{constructor(t){super(),P(this,t,J,G,s,{})}}function Q(e){let n;return{c(){n=a("p"),n.textContent="You don't have any tasks",$(n,"class","empty svelte-18fszsd")},m(t,e){u(t,n,e)},p:t,i:t,o:t,d(t){t&&l(n)}}}class R extends U{constructor(t){super(),P(this,t,null,Q,s,{})}}function V(t){let e,n,o;const s=t[2].default,i=function(t,e,n,o){if(t){const o=c(t,e,n,null);return t[0](o)}}(s,t,t[1]);return{c(){e=a("button"),i&&i.c(),$(e,"type","button"),$(e,"class","btn svelte-41dk2j")},m(s,c,l){u(s,e,c),i&&i.m(e,null),n=!0,l&&o(),o=m(e,"click",(function(){r(t[0])&&t[0].apply(this,arguments)}))},p(e,[n]){t=e,i&&i.p&&2&n&&i.p(c(s,t,t[1],null),t[1].dirty)},i(t){n||(O(i,t),n=!0)},o(t){q(i,t),n=!1},d(t){t&&l(e),i&&i.d(t),o()}}}function W(t,e,n){let{onClick:o}=e,{$$slots:r={},$$scope:s}=e;return t.$set=t=>{"onClick"in t&&n(0,o=t.onClick),"$$scope"in t&&n(1,s=t.$$scope)},[o,s,r]}class X extends U{constructor(t){super(),P(this,t,W,V,s,{onClick:0})}}function Z(t){let e,n,o,r,s,c,p=t[0].text+"";const m=new X({props:{onClick:t[1],$$slots:{default:[et]},$$scope:{ctx:t}}}),$=new X({props:{onClick:t[3],$$slots:{default:[nt]},$$scope:{ctx:t}}});return{c(){e=a("span"),n=f(p),o=d(),r=a("div"),F(m.$$.fragment),s=d(),F($.$$.fragment)},m(t,l){u(t,e,l),i(e,n),u(t,o,l),u(t,r,l),H(m,r,null),i(r,s),H($,r,null),c=!0},p(t,e){(!c||1&e)&&p!==(p=t[0].text+"")&&function(t,e){t.data!==(e=""+e)&&(t.data=e)}(n,p);const o={};128&e&&(o.$$scope={dirty:e,ctx:t}),m.$set(o);const r={};128&e&&(r.$$scope={dirty:e,ctx:t}),$.$set(r)},i(t){c||(O(m.$$.fragment,t),O($.$$.fragment,t),c=!0)},o(t){q(m.$$.fragment,t),q($.$$.fragment,t),c=!1},d(t){t&&l(e),t&&l(o),t&&l(r),I(m),I($)}}}function tt(e){let n,s,c,i,f,p;const h=new X({props:{$$slots:{default:[ot]},$$scope:{ctx:e}}});return{c(){n=a("input"),i=d(),F(h.$$.fragment),$(n,"type","text"),$(n,"class","edit svelte-hvwc4g"),n.value=s=e[0].text},m(s,l,a){var d;u(s,n,l),u(s,i,l),H(h,s,l),f=!0,a&&o(p),p=[m(n,"keypress",e[4]),m(n,"blur",e[2]),(d=c=e[5].call(null,n),d&&r(d.destroy)?d.destroy:t)]},p(t,e){(!f||1&e&&s!==(s=t[0].text)&&n.value!==s)&&(n.value=s);const o={};128&e&&(o.$$scope={dirty:e,ctx:t}),h.$set(o)},i(t){f||(O(h.$$.fragment,t),f=!0)},o(t){q(h.$$.fragment,t),f=!1},d(t){t&&l(n),t&&l(i),I(h,t),o(p)}}}function et(t){let e;return{c(){e=f("edit")},m(t,n){u(t,e,n)},d(t){t&&l(e)}}}function nt(t){let e;return{c(){e=f("remove")},m(t,n){u(t,e,n)},d(t){t&&l(e)}}}function ot(t){let e;return{c(){e=f("Close")},m(t,n){u(t,e,n)},d(t){t&&l(e)}}}function rt(t){let e,n,o,r;const s=[tt,Z],c=[];function i(t,e){return t[0].isEdit?0:1}return n=i(t),o=c[n]=s[n](t),{c(){e=a("li"),o.c(),$(e,"class","item svelte-hvwc4g")},m(t,o){u(t,e,o),c[n].m(e,null),r=!0},p(t,[r]){let u=n;n=i(t),n===u?c[n].p(t,r):(T(),q(c[u],1,1,()=>{c[u]=null}),z(),o=c[n],o||(o=c[n]=s[n](t),o.c()),O(o,1),o.m(e,null))},i(t){r||(O(o),r=!0)},o(t){q(o),r=!1},d(t){t&&l(e),c[n].d()}}}function st(t,e,n){let{data:o}=e,{dispatch:r}=e;return t.$set=t=>{"data"in t&&n(0,o=t.data),"dispatch"in t&&n(6,r=t.dispatch)},[o,()=>{r("items/openEdit",o.id)},()=>{r("items/closeEdit",o.id)},()=>{r("items/remove",o.id)},({keyCode:t,target:e})=>{13===t&&""!==e.value.trim()&&r("items/update",{id:o.id,text:e.value})},t=>{t.focus()},r]}class ct extends U{constructor(t){super(),P(this,t,st,rt,s,{data:0,dispatch:6})}}function it(t,e,n){const o=t.slice();return o[3]=e[n],o}function ut(e){let n;const o=new R({});return{c(){F(o.$$.fragment)},m(t,e){H(o,t,e),n=!0},p:t,i(t){n||(O(o.$$.fragment,t),n=!0)},o(t){q(o.$$.fragment,t),n=!1},d(t){I(o,t)}}}function lt(t){let e,n,o=[],r=new Map,s=t[0];const c=t=>t[3].id;for(let e=0;e<s.length;e+=1){let n=it(t,s,e),i=c(n);r.set(i,o[e]=at(i,n))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=p()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);u(t,e,r),n=!0},p(t,n){if(5&n){const s=t[0];T(),o=function(t,e,n,o,r,s,c,i,u,l,a,f){let d=t.length,p=s.length,m=d;const $={};for(;m--;)$[t[m].key]=m;const h=[],g=new Map,y=new Map;for(m=p;m--;){const t=f(r,s,m),o=n(t);let i=c.get(o);i?i.p(t,e):(i=l(o,t),i.c()),g.set(o,h[m]=i),o in $&&y.set(o,Math.abs(m-$[o]))}const x=new Set,v=new Set;function b(t){O(t,1),t.m(i,a,c.has(t.key)),c.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=h[p-1],n=t[d-1],o=e.key,r=n.key;e===n?(a=e.first,d--,p--):g.has(r)?!c.has(o)||x.has(o)?b(e):v.has(r)?d--:y.get(o)>y.get(r)?(v.add(o),b(e)):(x.add(r),d--):(u(n,c),d--)}for(;d--;){const e=t[d];g.has(e.key)||u(e,c)}for(;p;)b(h[p-1]);return h}(o,n,c,0,t,s,r,e.parentNode,B,at,e,it),z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)O(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)q(o[t]);n=!1},d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&l(e)}}}function at(t,e){let n,o;const r=new ct({props:{data:e[3],dispatch:e[2]}});return{key:t,first:null,c(){n=p(),F(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),H(r,t,e),o=!0},p(t,e){const n={};1&e&&(n.data=t[3]),r.$set(n)},i(t){o||(O(r.$$.fragment,t),o=!0)},o(t){q(r.$$.fragment,t),o=!1},d(t){t&&l(n),I(r,t)}}}function ft(t){let e,n,o,r;const s=[lt,ut],c=[];function i(t,e){return t[0].length>0?0:1}return n=i(t),o=c[n]=s[n](t),{c(){e=a("ul"),o.c(),$(e,"class","list svelte-96jcg8")},m(t,o){u(t,e,o),c[n].m(e,null),r=!0},p(t,[r]){let u=n;n=i(t),n===u?c[n].p(t,r):(T(),q(c[u],1,1,()=>{c[u]=null}),z(),o=c[n],o||(o=c[n]=s[n](t),o.c()),O(o,1),o.m(e,null))},i(t){r||(O(o),r=!0)},o(t){q(o),r=!1},d(t){t&&l(e),c[n].d()}}}function dt(e,n,o){let r;const{items:s,dispatch:c}=D("items");return function(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,t=>o(0,r=t)))}(e,s),[r,s,c]}class pt extends U{constructor(t){super(),P(this,t,dt,ft,s,{})}}function mt(e){let n,o,r,s,c;const f=new K({}),p=new pt({});return{c(){n=a("main"),o=a("h1"),o.textContent="Todo",r=d(),F(f.$$.fragment),s=d(),F(p.$$.fragment),$(n,"class","main svelte-f9kgaf")},m(t,e){u(t,n,e),i(n,o),i(n,r),H(f,n,null),i(n,s),H(p,n,null),c=!0},p:t,i(t){c||(O(f.$$.fragment,t),O(p.$$.fragment,t),c=!0)},o(t){q(f.$$.fragment,t),q(p.$$.fragment,t),c=!1},d(t){t&&l(n),I(f),I(p)}}}function $t(t,e,n){let{store:o}=e;return function(t){var e,n;e=Y,n=t,x().$$.context.set(e,n)}(o),t.$set=t=>{"store"in t&&n(0,o=t.store)},[o]}class ht extends U{constructor(t){super(),P(this,t,$t,mt,s,{store:0})}}for(var gt="-_",yt=36;yt--;)gt+=yt.toString(36);for(yt=36;yt---10;)gt+=yt.toString(36).toUpperCase();var xt=function(t){var e="";for(yt=t||21;yt--;)e+=gt[64*Math.random()|0];return e};const vt=t=>({id:xt(16),text:t,isEdit:!1}),bt=(t=>{let e={},n={},o={dispatch(t,r){if("@dispatch"!==t&&o.dispatch("@dispatch",[t,r,e[t]]),e[t]){let s,c={};e[t].forEach(t=>{let e=t(n,r);e&&"function"!==typeof e.then&&(s=n={...n,...e},c={...c,...e})}),s&&o.dispatch("@changed",c)}},get(){return n},on:(t,n)=>((e[t]||(e[t]=[])).push(n),()=>{e[t]=e[t].filter(t=>t!==n)})};return t.forEach(t=>{t&&t(o)}),o.dispatch("@init"),o})([({dispatch:t,on:e})=>{e("@init",()=>({items:[]})),e("items/add",({items:t},e)=>({items:[vt(e),...t]})),e("items/remove",({items:t},e)=>({items:t.filter(t=>t.id!==e)})),e("items/@change",({items:t},{id:e,...n})=>{const o=t.findIndex(t=>t.id===e);return t.splice(o,1,{...t[o],...n}),{items:[...t]}}),e("items/openEdit",(e,n)=>{t("items/@change",{id:n,isEdit:!0})}),e("items/closeEdit",(e,n)=>{t("items/@change",{id:n,isEdit:!1})}),e("items/update",(e,{id:n,text:o})=>{t("items/@change",{id:n,text:o,isEdit:!1})})},!1]);class kt extends HTMLElement{connectedCallback(){new ht({target:this,props:{store:bt}})}}window.customElements.define("todo-app",kt)}();
